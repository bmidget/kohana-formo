<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Kohana-formo : Object-based form handling for Kohana 3" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascripts/marked.js"></script>
    <script type="text/javascript" src="javascripts/site.js"></script>

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/bootstrap.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Formo Files</title>
  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

 <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
	  <div class="navbar-inner">
		<div class="container">
		  <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		  <a class="brand" href="./index.html">
			  <img src="images/formo-logo.png" alt="Formo For Kohana" width="116" height="50">
		  </a>
		  <div class="nav-collapse collapse">
			<ul class="nav">
			  <li class="">
				<a href="./index.html">Home</a>
			  </li>
			  <li class="">
				<a href="./form-basics.html">Form Basics</a>
			  </li>
			  <li class="">
				<a href="./validation.html">Validation</a>
			  </li>
			  <li class="">
				<a href="./orm.html">ORM</a>
			  </li>
			  <li class="active">
				<a href="./files.html">Files</a>
			  </li>
			  <li class="">
				<a href="./examples.html">Examples</a>
			  </li>
			</ul>
		  </div>
		</div>
	  </div>
	</div>

<header class="jumbotron subhead" id="overview">
  <div class="container">
    <h1>Files</h1>
    <p class="lead">File handling is a breeze.</p>
  </div>
</header>



  <div class="container">

    <!-- Docs nav
    ================================================== -->
    <div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#field"><i class="icon-chevron-right"></i> Adding a file field</a></li>
          <li><a href="#validating"><i class="icon-chevron-right"></i> Validating files</a></li>
          <li><a href="#value"><i class="icon-chevron-right"></i> Field value</a></li>
        </ul>
      </div>
      <div class="span9">



<section id="field">
	<div class="page-header">
		<h1>Adding a file field</h1>
	</div> <!-- md -->

<div class="md">
Use the file driver (not `input|file`)

```
$form->add(‘upload’, ‘file’);
```

When you add a file field to a form, the form automatically adds the `enctype="multipart/form-data"` attribute.
</div> <!-- md -->

</section>

<section id="validating">
	<div class="page-header">
		<h1>Validating files</h1>
	</div> <!-- md -->

<div class="md">
A file field’s value is always `NULL` when it’s empty (as opposed to an empty array from `$_FILES`). Because of this, you use the regular `not_empty` validation rule for making the field required.

You can use Kohana’s file validation rules for any other file field rules.

```
$form->add_rule([
	‘upload’ => [
		[‘not_empty’],
		['Upload::type', [':value', ['jpg','png','gif']]],
	]
]);
```
When you run `Formo::load()`, Formo always looks for any file fields inside the $_FILES array without having to pass the array into `Formo::load()`.

Thus, this will work correctly:

```
$form->add('thumbnail', 'file')
	->rule([
		'thumbnail' => [
			['not_empty'],
			['Upload::type', [':value', ['jpg','png','gif']]],
		]
	]);

// Formo will load the 'thumbnail' field from $_FILES when you call Formo::load()
if ($form->load()->validate())
{
	// File passed
}
```

</div> <!-- md -->

</section>

<section id="value">
	<div class="page-header">
		<h1>Field Value</h1>
	</div> <!-- md -->

<div class="md">
When a file has a value, it is an array from `$_FILES`. The value looks like this:

```
array(5) (
    "name" => string(40) "Screen Shot 2012-09-20 at 9.44.28 PM.png"
    "type" => string(9) "image/png"
    "tmp_name" => string(26) "/private/var/tmp/phpB4cFSq"
    "error" => integer 0
    "size" => integer 62393
)
```
</div> <!-- md -->

</section>


	<div style="height:40px"></div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'formo'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </div>
    </div>

  </div>


  </body>
</html>
