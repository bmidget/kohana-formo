<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Kohana-formo : Object-based form handling for Kohana 3" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascripts/marked.js"></script>
    <script type="text/javascript" src="javascripts/site.js"></script>

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/bootstrap.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Formo Examples</title>
  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

 <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
	  <div class="navbar-inner">
		<div class="container">
		  <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		  <a class="brand" href="./index.html">
			  <img src="images/formo-logo.png" alt="Formo For Kohana" width="116" height="50">
		  </a>
		  <div class="nav-collapse collapse">
			<ul class="nav">
			  <li class="">
				<a href="./index.html">Home</a>
			  </li>
			  <li class="">
				<a href="./form-basics.html">Form Basics</a>
			  </li>
			  <li class="">
				<a href="./validation.html">Validation</a>
			  </li>
			  <li class="">
				<a href="./orm.html">ORM</a>
			  </li>
			  <li class="">
				<a href="./files.html">Files</a>
			  </li>
			  <li class="active">
				<a href="./examples.html">Examples</a>
			  </li>
			</ul>
		  </div>
		</div>
	  </div>
	</div>

<header class="jumbotron subhead" id="overview">
  <div class="container">
    <h1>Examples</h1>
    <p class="lead">See examples of Formo at work.</p>
  </div>
</header>



  <div class="container">

    <!-- Docs nav
    ================================================== -->
    <div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#html5"><i class="icon-chevron-right"></i> HTML5 Inputs</a></li>
          <li><a href="#class"><i class="icon-chevron-right"></i> Add Class/Attributes</a></li>
          <li><a href="#cb"><i class="icon-chevron-right"></i> Checkboxes, Radios, Select</a></li>
          <li><a href="#templates"><i class="icon-chevron-right"></i> Custom templates</a></li>
          <li><a href="#optional-subforms"><i class="icon-chevron-right"></i> Optional subforms</a></li>
        </ul>
      </div>
      <div class="span9">



<section id="html5">
	<div class="page-header">
		<h1>HTML5 Inputs</h1>
	</div> <!-- page-header -->

<div class="md">
Most HTML5-specific elements are `input` tags with special `type` attributes. For example, `<input type="email" />` is an HTML5-spcific data type.

To easily set the `type` tag with an `input` driver, use a pipe character `|`:

```
$form->add('email_address', 'input|email');

$form->email_address->set('driver', 'input|email');
```

## HTML 5 Input types

Use any of the following driver|type combindations:

- input|tel
- input|email
- input|url
- input|date
- input|datetime
- input|datetime-local
- input|color
- input|week
- input|time
- input|month
- input|range
- input|number

## Datalist

```
$opts = array
(
	'run'        => 'running',
	'jump'       => 'jumping',
	'crawl'      => 'crawling',
	'swim'       => 'swimming',
	'basketball' => 'basketball',
);

$form->add('hobbies', 'datalist', NULL, ['opts' => $opts]);
```

</div> <!-- md -->
</section>

<section id="class">
	<div class="page-header">
		<h1>Add class/attributes</h1>
	</div> <!-- page-header -->


<div class="md">
## Add and remove classes

To edit the class for a field, use `Formo::add_class()` and `Formo::remove_class()`. They work just like jQuery.

```
$form->email->add_class('foo bar');
$form->email->add_class(['foo', 'bar']);

$form->email->remove_class('foo');
```

To add a class at a field's creation or using `Formo::set()`, note that a field's class exists in `attr['class']`

```
$form->add('email', 'input|email', NULL, ['attr.class' => 'foo bar']);
$form->email->set('attr.class', 'foo bar');
```

## Attributes

HTML attributes can be directly manipulated in Formo objects as well. They exist in the `attr` field attribute.

Ultimately `attr` is an array of HTML attributes.

```
$attr = [
	'onclick' => 'doSomething()',
	'id' => 'someId',
	'placeholder' => 'myplaceholdertext',
	'class' => 'foo bar',
];

$form->$field->set('attr', $attr);
```

Because of this, at creation, it is often convenient to just use dot syntax to set a single attribute

```
$form->add('email', 'input|email', NULL, ['attr.placeholder' => 'john@doe.com']);
```

To edit attributes, you can always directly get and set them using `Formo::set('attr' => [])`, `Formo::get('attr.name')` and `Formo::merge('attr', $attrs)`, but it's often easier to use `Formo::attr()`.

The arguments for `Formo::attr()`:

- name
- value (optional, default = NULL)

If you don't specify a second argument, the method will return the attribute for that field.

You can also pass an array of attributes as well.

And to unset an attribute, pass `NULL` as the second parameter.

```
$form->attr('id', 'foobar');

$id = $form->attr('id');

$form->attr('id', NULL);
```

You can also set an array of attributes.

```
$form->attr([
	'id' => 'foo',
	'class' => 'foobar',
	'onclick' => 'do_somethign()',
])
```
</div> <!-- md -->
</section>

<section id="cb">
	<div class="page-header">
		<h1>Checkboxes, Radios, Select</h1>
	</div> <!-- page-header -->

<div class="md">
These field types require an `opts` array of `value => label` pairs that are used for the checkboxes, readios and options.

Here, we are creating all three field types from one array.

```
$opts = array
(
	'run'        => 'running',
	'jump'       => 'jumping',
	'crawl'      => 'crawling',
	'swim'       => 'swimming',
	'basketball' => 'basketball',
);
```

## Select

```
// Select field with 'jump' option selected
$form->add('hobbies', 'select', 'jump', ['opts' => $opts]);
```

For optgroups, use arrays within the `opts` array, like this:

```
$opts = array
(
	'on foot' => array
	(
		'run'  => 'running',
		'jump' => 'jumping',
		'skip' => 'skipping',
	),
	'on water' => array
	(
		'swim' => 'swimming',
		'boat' => 'boating',
		'dive' => 'diving',
	),
	'basketball' => 'basketball',
);

$form->('hobbies', 'select', null, ['opts' => $opts]);
```

## Radios

```
// Radios with 'swim' option selected
$form->add('hobbies', 'radios', 'swim', ['opts' => $opts]);
```

## Checkboxes

```
// Checkboxes with 'jump' and 'swim' selected
$form->add('hobbies', 'checkboxes', ['jump', 'swim'], ['opts' => $opts]);
```

## Single checkbox

```
// Single checkbox checked by default
$form->add('bool_field', 'checkbox', 1);
```


</div> <!-- md -->
</section>

<section id="templates">
	<div class="page-header">
		<h1>Custom Templates</h1>
	</div> <!-- page-header -->

<div class="md">
There are two variables Formo uses to decide which view file to use as a field's template:

- `template_dir`
- `template`

The default `template_dir` is defined in the Formo config.php file.

The `template` variable is defined per-driver (and can also be customized per field or form). When the field renders, Formo finds a view file named `$template_dir/$template`.

In the view, Formo passes a single variable named `$field` which is either the form or field object. To customize your form, set these files, then create custom HTML that looks the way you want it.

Here's an example of styling a form by changing all the template directories.

```
$form->set('template_dir', 'my_special_form');

foreach ($form->get('fields') as $field)
{
	$field->set('template_dir', 'my_special_form');
}
```

Or just set a template for a specific field that has complicated styling.

```
$form->complicated_field->set('template', 'complicated_template');
```

It's also easy to set a template for a specific form.

```
$form->set('template', 'my_form_template');
```

</div> <!-- md -->
</section>


<section id="optional-subforms">
	<div class="page-header">
		<h1>Optional Subforms</h1>
	</div> <!-- page-header -->

<div class="md">
It's common to have an entire subform that needs to be validated as a whole subform under specific situations.

A typical situation goes like this:

```
- Enter mailing address
- Choose whether shipping address is different from mailin address
- If so, enter shipping address
```

Consider the situation above. The second form has a bunch of validation rules that only matter at all if the user selected 'shipping address is different from mailing address.'

You can do this with Formo subforms.

Here's an example

```
$form = Formo::form();

$form->mailing_address = Formo::form()
	->add('city', 'input', null, array('rules' => array(array('not_empty'))))
	->add('state', 'input', null, array('rules' => array(array('not_empty'))))
	->add('zip', 'input', null, array('rules' => array(array('not_empty'))));

$form->add('different_shipping_address', 'checkbox');

$form->shipping_address = Formo::form()
	->add('city', 'input', null, array('rules' => array(array('not_empty'))))
	->add('state', 'input', null, array('rules' => array(array('not_empty'))))
	->add('zip', 'input', null, array('rules' => array(array('not_empty'))));

$form->add('submit', 'input|submit', 'save')
	->load($this->request->post());

if ($form->mailing_address->validate())
{
	
}

if ($form->different_shipping_address->val() AND $form->address2->validate())
{
	
}
```

You can see it's not difficult to validate an entire subform based on meeting certain criteria.
</div> <!-- md -->
</section>


      </div>
    </div>

  </div>


  </body>
</html>
